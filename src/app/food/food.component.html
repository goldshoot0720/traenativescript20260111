<ActionBar class="action-bar">
  <NavigationButton visibility="hidden"></NavigationButton>
  <GridLayout columns="50, *">
    <Label class="action-bar-title" text="é£Ÿå“ç®¡ç†" colSpan="2"></Label>
    <Label class="fas" text="&#xf0c9;" (tap)="onDrawerButtonTap()"></Label>
  </GridLayout>
</ActionBar>

<GridLayout class="page__content bg-purple" rows="*" height="100%" width="100%">
    <TabView row="0" height="100%" width="100%" selectedIndex="0" androidTabsPosition="bottom" selectedTabTextColor="#00E676" tabBackgroundColor="#6200EE" selectedTabBackgroundColor="#6200EE" tabTextColor="#ffffff">
        <TabViewItem title="é£Ÿå“æ¸…å–®">
            <GridLayout rows="auto, *" class="p-20" height="100%" width="100%">
                <!-- Header -->
                <GridLayout row="0" columns="auto, *" class="m-b-20">
                    <Label text="é£Ÿå“æ¸…å–®" class="h2 font-weight-bold text-white"></Label>
                    <Button text="ðŸ”„ åŒæ­¥" (tap)="onSync()" class="btn btn-sm bg-purple-light text-white m-l-10" col="1" horizontalAlignment="left" height="30" padding="0 10" style="border-radius: 5;"></Button>
                </GridLayout>

                <!-- List -->
                <ScrollView row="1">
                    <StackLayout>
                        <GridLayout *ngFor="let item of foodItems" rows="auto, auto" columns="80, *, auto" class="card bg-purple-light p-15 m-b-10" style="border-radius: 10;">
                            <!-- Image -->
                            <Image [src]="item.image" stretch="aspectFill" col="0" row="0" rowSpan="2" class="m-r-10 bg-white" height="80" width="80" style="border-radius: 5;" loadMode="async"></Image>
                            
                            <!-- Details -->
                            <Label [text]="item.name" class="h3 font-weight-bold text-white" col="1" row="0" textWrap="true"></Label>
                            <Label text="&#xf2ed;" class="fas text-white-50" col="2" row="0" (tap)="onDelete(item)" horizontalAlignment="right" style="font-size: 20"></Label>
                            
                            <StackLayout col="1" row="1" verticalAlignment="bottom">
                                <Label [text]="'æ•¸é‡: ' + item.amount + ' | åƒ¹æ ¼: $' + item.price" class="body text-white-50 m-b-5"></Label>
                                <Label [text]="'åˆ°æœŸæ—¥: ' + item.expiryDate" class="caption text-white-50"></Label>
                            </StackLayout>
                        </GridLayout>
                    </StackLayout>
                </ScrollView>
            </GridLayout>
        </TabViewItem>

        <TabViewItem title="æ–°å¢žé£Ÿå“">
            <ScrollView class="p-20">
                <StackLayout class="p-20 bg-purple-light card" style="border-radius: 10;">
                    <Label text="æ–°å¢žé£Ÿå“" class="h2 font-weight-bold text-white m-b-20"></Label>

                    <Label text="åç¨± (Name)" class="label text-white m-b-5"></Label>
                    <TextField [(ngModel)]="newName" class="input p-10 m-b-15 bg-white-trans" height="50" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5; placeholder-color: #666;"></TextField>

                    <GridLayout columns="*, *" class="m-b-15">
                        <StackLayout col="0" class="m-r-5">
                             <Label text="æ•¸é‡ (Amount)" class="label text-white m-b-5"></Label>
                             <GridLayout columns="*, auto, auto">
                                <TextField [(ngModel)]="newAmount" class="input p-10 bg-white-trans" col="0" height="50" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5 0 0 5; placeholder-color: #666;"></TextField>
                                <Label text="â–²" class="text-black p-10 bg-white-trans" col="1" height="50" verticalAlignment="center" style="background-color: rgba(255,255,255,0.8); font-size: 12;"></Label>
                                <Label text="â–¼" class="text-black p-10 bg-white-trans" col="2" height="50" verticalAlignment="center" style="background-color: rgba(255,255,255,0.8); border-radius: 0 5 5 0; font-size: 12;"></Label>
                             </GridLayout>
                        </StackLayout>
                        <StackLayout col="1" class="m-l-5">
                             <Label text="åƒ¹æ ¼ (Price)" class="label text-white m-b-5"></Label>
                             <GridLayout columns="*, auto">
                                <TextField [(ngModel)]="newPrice" hint="NT$0" class="input p-10 bg-white-trans" col="0" height="50" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5 0 0 5; placeholder-color: #666;"></TextField>
                                <Label text="â–¼" class="text-black p-10 bg-white-trans" col="1" height="50" verticalAlignment="center" style="background-color: rgba(255,255,255,0.8); border-radius: 0 5 5 0;"></Label>
                             </GridLayout>
                        </StackLayout>
                    </GridLayout>

                    <Label text="åˆ°æœŸæ—¥ (To Date)" class="label text-white m-b-5"></Label>
                    <GridLayout columns="*,*,*" class="m-b-15">
                        <TextField [(ngModel)]="newDateYear" hint="2026" class="input p-10 bg-white-trans m-r-5" col="0" height="50" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5; placeholder-color: #666;"></TextField>
                        <TextField [(ngModel)]="newDateMonth" hint="1æœˆ" class="input p-10 bg-white-trans m-r-5" col="1" height="50" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5; placeholder-color: #666;"></TextField>
                        <TextField [(ngModel)]="newDateDay" hint="11" class="input p-10 bg-white-trans" col="2" height="50" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5; placeholder-color: #666;"></TextField>
                    </GridLayout>

                    <Label text="å•†åº— (Shop)" class="label text-white m-b-5"></Label>
                    <TextField [(ngModel)]="newShop" class="input p-10 m-b-15 bg-white-trans" height="50" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5; placeholder-color: #666;"></TextField>

                    <Label text="åœ–ç‰‡ (Photo)" class="label text-white m-b-5"></Label>
                    <StackLayout class="bg-purple p-10 m-b-15" height="150" (tap)="onSelectPhoto()" style="background-color: #4A148C; border-radius: 5;">
                         <Label text="é¸æ“‡åœ–ç‰‡..." class="text-white-50" verticalAlignment="center" horizontalAlignment="center"></Label>
                    </StackLayout>
                    
                    <GridLayout columns="auto, *" class="m-b-20">
                         <Label text="Hash: " class="label text-white-50 col-0" verticalAlignment="center"></Label>
                         <TextField [(ngModel)]="newHash" class="input p-5 bg-white-trans col-1" editable="false" height="40" style="font-size: 14; color: black; background-color: rgba(255,255,255,0.6); border-radius: 5;"></TextField>
                    </GridLayout>
                    
                    <StackLayout height="5" backgroundColor="#00E676" borderRadius="2" class="m-b-20"></StackLayout>

                    <Button text="åŠ å…¥æ¸…å–®" (tap)="onAdd()" class="btn btn-primary bg-green text-black font-weight-bold" height="50" style="font-size: 18; border-radius: 5;"></Button>
                </StackLayout>
            </ScrollView>
        </TabViewItem>
    </TabView>
</GridLayout>