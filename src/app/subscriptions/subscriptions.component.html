<GridLayout rows="*" height="100%" width="100%" class="bg-purple">
    <TabView height="100%" width="100%" selectedIndex="0" androidTabsPosition="bottom" selectedTabTextColor="#00E676" tabBackgroundColor="#6200EE" selectedTabBackgroundColor="#6200EE" tabTextColor="#ffffff">
        <!-- Subscription List Tab -->
        <TabViewItem title="è¨‚é–±æ¸…å–®">
            <GridLayout rows="auto, *" height="100%" width="100%">
                <!-- Header -->
                <GridLayout row="0" columns="*, auto" class="p-15 m-b-10" style="background: rgba(255, 255, 255, 0.1);">
                    <StackLayout col="0" orientation="horizontal" verticalAlignment="center">
                        <Label text="è¨‚é–±æ¸…å–®" class="h1 text-white font-weight-bold m-r-10"></Label>
                        <Label text="â— åŒæ­¥" class="body text-green font-weight-bold"></Label>
                    </StackLayout>
                    <Button col="1" text="ðŸ”„" (tap)="onSync()" class="btn btn-sm" style="background: rgba(255, 255, 255, 0.2); color: white; border-radius: 20; width: 40; height: 40;"></Button>
                </GridLayout>
                
                <!-- Subscription List -->
                <ListView row="1" [items]="subscriptions" class="list-group" separatorColor="transparent">
                    <ng-template let-item="item">
                        <GridLayout columns="*, auto" class="list-group-item m-x-15 m-b-15 p-20" style="background: rgba(102, 126, 234, 0.8); border-radius: 12;">
                            <!-- Subscription Info -->
                            <StackLayout col="0">
                                <Label [text]="item.name" class="h2 font-weight-bold m-b-8 text-white" textWrap="true"></Label>
                                
                                <!-- Price and Account Info -->
                                <GridLayout columns="auto, *" class="m-b-5" *ngIf="item.price > 0">
                                    <Label col="0" text="åƒ¹æ ¼:" class="body text-white m-r-5"></Label>
                                    <Label col="1" [text]="'$' + item.price" class="body text-white font-weight-bold"></Label>
                                </GridLayout>
                                <GridLayout columns="auto, *" class="m-b-5" *ngIf="item.price === 0">
                                    <Label col="0" text="åƒ¹æ ¼:" class="body text-white m-r-5"></Label>
                                    <Label col="1" text="å…è²»" class="body text-green font-weight-bold"></Label>
                                </GridLayout>
                                
                                <!-- Account Info -->
                                <GridLayout columns="auto, *" class="m-b-5" *ngIf="item.account">
                                    <Label col="0" text="å¸³è™Ÿ:" class="body text-white m-r-5"></Label>
                                    <Label col="1" [text]="item.account" class="body text-white"></Label>
                                </GridLayout>
                                
                                <!-- Website -->
                                <Label [text]="item.site" class="caption text-white m-b-5" textWrap="true" *ngIf="item.site"></Label>
                                
                                <!-- Next Payment Date -->
                                <GridLayout columns="auto, *" class="m-b-5">
                                    <Label col="0" text="ä¸‹æ¬¡ä»˜æ¬¾:" class="caption text-white m-r-5"></Label>
                                    <Label col="1" [text]="item.nextDate" class="caption text-white font-weight-bold"></Label>
                                </GridLayout>
                                
                                <!-- Note -->
                                <Label [text]="item.note" class="caption text-white" textWrap="true" *ngIf="item.note" style="font-style: italic;"></Label>
                            </StackLayout>
                            
                            <!-- Action Button -->
                            <StackLayout col="1" verticalAlignment="top" horizontalAlignment="right">
                                <Button text="ðŸ—‘ï¸" (tap)="onDelete(item)" class="btn btn-sm" style="background: rgba(255, 255, 255, 0.2); color: white; border-radius: 20;" width="40" height="40"></Button>
                            </StackLayout>
                        </GridLayout>
                    </ng-template>
                </ListView>
            </GridLayout>
        </TabViewItem>

        <!-- Add New Subscription Tab -->
        <TabViewItem title="æ–°å¢žè¨‚é–±">
            <ScrollView style="background: rgba(255, 255, 255, 0.95);">
                <StackLayout class="p-20">
                    <Label text="æ–°å¢žè¨‚é–±" class="h1 font-weight-bold m-b-25 text-center" style="color: #333;"></Label>
                    
                    <!-- Name Field -->
                    <StackLayout class="m-b-20">
                        <Label text="åç¨± (Name)" class="label font-weight-bold m-b-8" style="color: #555;"></Label>
                        <TextField [(ngModel)]="newSubName" hint="ä¾‹å¦‚: Netflix" class="input p-15" style="background: #f8f9fa; border-radius: 8; border-width: 1; border-color: #e9ecef; color: #333;"></TextField>
                    </StackLayout>
                    
                    <!-- Price Field -->
                    <StackLayout class="m-b-20">
                        <Label text="åƒ¹æ ¼ (Price)" class="label font-weight-bold m-b-8" style="color: #555;"></Label>
                        <GridLayout columns="*, auto">
                            <TextField col="0" [(ngModel)]="newSubPrice" keyboardType="number" hint="0" class="input p-15" style="background: #f8f9fa; border-radius: 8; border-width: 1; border-color: #e9ecef; color: #333;"></TextField>
                            <Label col="1" text="NT$" class="body m-l-10" verticalAlignment="center" style="color: #666;"></Label>
                        </GridLayout>
                    </StackLayout>
                    
                    <!-- Next Payment Date -->
                    <StackLayout class="m-b-20">
                        <Label text="ä¸‹æ¬¡ä»˜æ¬¾æ—¥æœŸ (Next Date)" class="label font-weight-bold m-b-8" style="color: #555;"></Label>
                        <GridLayout columns="*, 10, *, 10, *">
                            <TextField col="0" [(ngModel)]="newSubDateYear" keyboardType="number" hint="2026" class="input p-15 text-center" style="background: #f8f9fa; border-radius: 8; border-width: 1; border-color: #e9ecef; color: #333;"></TextField>
                            <TextField col="2" [(ngModel)]="newSubDateMonth" keyboardType="number" hint="1" class="input p-15 text-center" style="background: #f8f9fa; border-radius: 8; border-width: 1; border-color: #e9ecef; color: #333;"></TextField>
                            <TextField col="4" [(ngModel)]="newSubDateDay" keyboardType="number" hint="12" class="input p-15 text-center" style="background: #f8f9fa; border-radius: 8; border-width: 1; border-color: #e9ecef; color: #333;"></TextField>
                        </GridLayout>
                        <Label text="å¹´          æœˆ          æ—¥" class="caption text-center m-t-5" style="color: #999;"></Label>
                    </StackLayout>
                    
                    <!-- Site Field -->
                    <StackLayout class="m-b-20">
                        <Label text="ç¶²ç«™ (Site)" class="label font-weight-bold m-b-8" style="color: #555;"></Label>
                        <TextField [(ngModel)]="newSubSite" hint="https://..." class="input p-15" style="background: #f8f9fa; border-radius: 8; border-width: 1; border-color: #e9ecef; color: #333;"></TextField>
                    </StackLayout>
                    
                    <!-- Account Field -->
                    <StackLayout class="m-b-20">
                        <Label text="å¸³è™Ÿ (Account)" class="label font-weight-bold m-b-8" style="color: #555;"></Label>
                        <TextField [(ngModel)]="newSubAccount" hint="å¸³è™Ÿè³‡è¨Š" class="input p-15" style="background: #f8f9fa; border-radius: 8; border-width: 1; border-color: #e9ecef; color: #333;"></TextField>
                    </StackLayout>
                    
                    <!-- Note Field -->
                    <StackLayout class="m-b-30">
                        <Label text="å‚™è¨» (Note)" class="label font-weight-bold m-b-8" style="color: #555;"></Label>
                        <TextView [(ngModel)]="newSubNote" hint="å‚™è¨»..." class="p-15" height="100" style="background: #f8f9fa; border-radius: 8; border-width: 1; border-color: #e9ecef; color: #333;"></TextView>
                    </StackLayout>
                    
                    <!-- Add Button -->
                    <Button text="æ–°å¢ž è¨‚é–±" (tap)="onAdd()" class="font-weight-bold p-15 text-white" style="background: linear-gradient(135deg, #00E676 0%, #00C853 100%); border-radius: 25; font-size: 18;"></Button>
                    
                    <!-- Contentful Notice -->
                    <StackLayout class="m-t-20 p-15" style="background: rgba(102, 126, 234, 0.1); border-radius: 15;">
                        <Label text="ðŸ”— Contentful æ–°å¢ž 24 ç­†è¨‚é–±" class="caption text-center font-weight-bold" style="color: #6200EE;"></Label>
                    </StackLayout>
                </StackLayout>
            </ScrollView>
        </TabViewItem>
    </TabView>
</GridLayout>
