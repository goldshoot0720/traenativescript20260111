<ActionBar class="action-bar">
  <NavigationButton visibility="hidden"></NavigationButton>
  <GridLayout columns="50, *">
    <Label class="action-bar-title" text="è¨‚é–±ç®¡ç†" colSpan="2"></Label>
    <Label class="fas" text="&#xf0c9;" (tap)="onDrawerButtonTap()"></Label>
  </GridLayout>
</ActionBar>

<GridLayout class="page__content bg-purple" rows="*">
    <TabView row="0" height="100%" selectedIndex="0" androidTabsPosition="bottom" selectedTabTextColor="#00E676" tabBackgroundColor="#6200EE" selectedTabBackgroundColor="#6200EE" tabTextColor="#ffffff">
        <TabViewItem title="è¨‚é–±æ¸…å–®">
            <GridLayout rows="auto, *">
                <GridLayout row="0" columns="auto, *" class="m-15">
                    <Label text="è¨‚é–±æ¸…å–®" class="h2 font-weight-bold text-white"></Label>
                    <Button text="ðŸ”„ åŒæ­¥" (tap)="onSync()" class="btn btn-sm bg-purple-light text-white m-l-10" col="1" horizontalAlignment="left" height="30" padding="0 10" style="border-radius: 5;"></Button>
                </GridLayout>

                <ScrollView row="1">
                    <StackLayout class="p-10">
                        <GridLayout *ngFor="let item of subscriptions" rows="auto, auto, auto, auto" columns="*, auto" class="card bg-purple-light p-15 m-b-10" style="border-radius: 10;">
                            <Label [text]="item.name" class="h3 font-weight-bold text-white" col="0" row="0"></Label>
                            <Label text="&#xf2ed;" class="fas text-white-50" col="1" row="0" (tap)="onDelete(item)" horizontalAlignment="right" style="font-size: 20"></Label>
                            
                            <Label [text]="'åƒ¹æ ¼: $' + item.price + ' | å¸³è™Ÿ: ' + (item.account || '')" class="body text-white-50" col="0" row="1" colSpan="2"></Label>
                            <Label [text]="item.site" class="caption text-blue" col="0" row="2" colSpan="2" textWrap="true"></Label>
                            <Label [text]="'ä¸‹æ¬¡æ‰£æ¬¾: ' + item.nextDate" class="caption text-white-50" col="0" row="3" colSpan="2"></Label>
                        </GridLayout>
                    </StackLayout>
                </ScrollView>
            </GridLayout>
        </TabViewItem>

        <TabViewItem title="æ–°å¢žè¨‚é–±">
            <ScrollView>
                <StackLayout class="p-20 bg-purple-light m-10 card" style="border-radius: 10;">
                    <Label text="æ–°å¢žè¨‚é–±" class="h2 font-weight-bold text-white m-b-20"></Label>

                    <Label text="åç¨± (Name)" class="label text-white m-b-5"></Label>
                    <TextField [(ngModel)]="newSubName" class="input p-10 m-b-15 bg-white-trans" height="50" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5; placeholder-color: #666;"></TextField>

                    <Label text="åƒ¹æ ¼ (Price)" class="label text-white m-b-5"></Label>
                    <GridLayout columns="*, auto" class="m-b-15">
                        <TextField [(ngModel)]="newSubPrice" hint="NT$0" class="input p-10 bg-white-trans" col="0" height="50" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5 0 0 5; placeholder-color: #666;"></TextField>
                        <Label text="â–¼" class="text-black p-10 bg-white-trans" col="1" height="50" verticalAlignment="center" style="background-color: rgba(255,255,255,0.8); border-radius: 0 5 5 0;"></Label>
                    </GridLayout>

                    <Label text="ä¸‹æ¬¡æ‰£æ¬¾æ—¥ (Next Date)" class="label text-white m-b-5"></Label>
                    <GridLayout columns="*,*,*" class="m-b-15">
                        <TextField [(ngModel)]="newSubDateYear" hint="2026" class="input p-10 bg-white-trans m-r-5" col="0" height="50" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5; placeholder-color: #666;"></TextField>
                        <TextField [(ngModel)]="newSubDateMonth" hint="1æœˆ" class="input p-10 bg-white-trans m-r-5" col="1" height="50" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5; placeholder-color: #666;"></TextField>
                        <TextField [(ngModel)]="newSubDateDay" hint="11" class="input p-10 bg-white-trans" col="2" height="50" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5; placeholder-color: #666;"></TextField>
                    </GridLayout>

                    <Label text="ç¶²ç«™ (Site)" class="label text-white m-b-5"></Label>
                    <TextField [(ngModel)]="newSubSite" class="input p-10 m-b-15 bg-white-trans" height="50" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5; placeholder-color: #666;"></TextField>

                    <Label text="å¸³è™Ÿ (Account)" class="label text-white m-b-5"></Label>
                    <TextField [(ngModel)]="newSubAccount" class="input p-10 m-b-15 bg-white-trans" height="50" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5; placeholder-color: #666;"></TextField>

                    <Label text="å‚™è¨» (Note)" class="label text-white m-b-5"></Label>
                    <TextView [(ngModel)]="newSubNote" class="input p-10 m-b-20 bg-white-trans" height="100" style="font-size: 16; color: black; background-color: rgba(255,255,255,0.8); border-radius: 5; placeholder-color: #666;"></TextView>

                    <Button text="åŠ å…¥æ¸…å–®" (tap)="onAdd()" class="btn btn-primary bg-green text-black font-weight-bold" height="50" style="font-size: 18; border-radius: 5;"></Button>
                    <Label [text]="'å¾ž Contentful è¼‰å…¥ ' + subscriptions.length + ' ç­†è¨‚é–±'" class="caption text-white-50 text-center m-t-10"></Label>
                </StackLayout>
            </ScrollView>
        </TabViewItem>
    </TabView>
</GridLayout>